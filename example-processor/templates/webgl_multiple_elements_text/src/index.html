<html>
  <head>
    <title>three.js webgl - multiple elements with text</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />
  </head>
  <body style="overflow: hidden">
    <canvas id="c"></canvas>

    <div id="info">
      <a href="https://threejs.org" target="_blank" rel="noopener">three.js</a>
      - multiple elements with text - webgl
    </div>

    <!-- Import maps polyfill -->
    <!-- Remove this when import maps will be widely supported -->
    <script
      async=""
      src="https://unpkg.com/es-module-shims@1.8.0/dist/es-module-shims.js"
    ></script>

    <script type="importmap">
      {
        "imports": {
          "three": "../build/three.module.js",
          "three/addons/": "./jsm/"
        }
      }
    </script>

    <p>
      Sound waves whose geometry is determined by a single dimension, plane
      waves, obey the wave equation
    </p>

    <!-- css math formatting inspired by http://mathquill.com/mathquill/mathquill.css -->

    <div class="math">
      <span class="math-frac">
        <span class="math-num"> ∂<sup>2</sup><i>u</i> </span>
        <span class="math-denom"> ∂<i>r</i><sup>2</sup> </span>
      </span>

      −

      <span class="math-frac">
        <span class="math-num">
          1<sup></sup>
          <!-- sup for vertical alignment -->
        </span>
        <span class="math-denom"> <i>c</i><sup>2</sup> </span>
      </span>

      <span class="math-frac">
        <span class="math-num"> ∂<sup>2</sup><i>u</i> </span>
        <span class="math-denom"> ∂<i>t</i><sup>2</sup> </span>
      </span>

      =&nbsp;0
    </div>

    <p>
      where <i>c</i> designates the speed of sound in the medium. The
      monochromatic solution for plane waves will be taken to be
    </p>

    <div class="math">
      <i>u</i>(<i>r</i>,<i>t</i>) =&nbsp;sin(<i>k</i><i>r</i> ± ω<i>t</i>)
    </div>

    <p>
      where ω is the frequency and <i>k</i>=ω/<i>c</i> is the wave number. The
      sign chosen in the argument determines the direction of movement of the
      waves.
    </p>

    <p>Here is a plane wave moving on a three-dimensional lattice of atoms:</p>

    <div class="view">
      <script>
        /* eslint-disable prefer-const*/
        let parent = document.scripts[document.scripts.length - 1].parentNode;

        parent.displacement = function (x, y, z, t, target) {
          return target.set(Math.sin(x - t), 0, 0);
        };

        parent.lattice = true;
      </script>
    </div>

    <p>
      Here is a plane wave moving through a three-dimensional random
      distribution of molecules:
    </p>

    <div class="view">
      <script>
        parent = document.scripts[document.scripts.length - 1].parentNode;

        parent.displacement = function (x, y, z, t, target) {
          return target.set(Math.sin(x - t), 0, 0);
        };

        parent.lattice = false;
      </script>
    </div>

    <p>
      Sound waves whose geometry is determined by two dimensions, cylindrical
      waves, obey the wave equation
    </p>

    <div class="math">
      <span class="math-frac">
        <span class="math-num"> ∂<sup>2</sup><i>u</i> </span>
        <span class="math-denom"> ∂<i>r</i><sup>2</sup> </span>
      </span>

      +

      <span class="math-frac">
        <span class="math-num"> 1 </span>
        <span class="math-denom">
          <i>r</i>
        </span>
      </span>

      <span class="math-frac">
        <span class="math-num"> ∂<i>u</i> </span>
        <span class="math-denom"> ∂<i>r</i> </span>
      </span>

      −

      <span class="math-frac">
        <span class="math-num">
          1<sup></sup>
          <!-- sup for vertical alignment -->
        </span>
        <span class="math-denom"> <i>c</i><sup>2</sup> </span>
      </span>

      <span class="math-frac">
        <span class="math-num"> ∂<sup>2</sup><i>u</i> </span>
        <span class="math-denom"> ∂<i>t</i><sup>2</sup> </span>
      </span>

      =&nbsp;0
    </div>

    <p>
      The monochromatic solution for cylindrical sound waves will be taken to be
    </p>

    <div class="math">
      <i>u</i>(<i>r</i>,<i>t</i>) =

      <span class="math-frac">
        <span class="math-num"> sin(<i>k</i><i>r</i> ± ω<i>t</i>) </span>
        <span class="math-denom">
          <span class="math-sqrt">√</span
          ><span class="math-sqrt-stem"><i>r</i></span>
        </span>
      </span>
    </div>

    <p>
      Here is a cylindrical wave moving on a three-dimensional lattice of atoms:
    </p>

    <div class="view">
      <script>
        parent = document.scripts[document.scripts.length - 1].parentNode;

        parent.displacement = function (x, y, z, t, target) {
          if (x * x + y * y < 0.01) {
            return target.set(0, 0, 0);
          } else {
            const rho = Math.sqrt(x * x + y * y);
            const phi = Math.atan2(y, x);

            return target.set(
              (1.5 * Math.cos(phi) * Math.sin(rho - t)) / Math.sqrt(rho),
              (1.5 * Math.sin(phi) * Math.sin(rho - t)) / Math.sqrt(rho),
              0
            );
          }
        };

        parent.lattice = true;
      </script>
    </div>

    <p>
      Here is a cylindrical wave moving through a three-dimensional random
      distribution of molecules:
    </p>

    <div class="view">
      <script>
        parent = document.scripts[document.scripts.length - 1].parentNode;

        parent.displacement = function (x, y, z, t, target) {
          if (x * x + y * y < 0.01) {
            return target.set(0, 0, 0);
          } else {
            const rho = Math.sqrt(x * x + y * y);
            const phi = Math.atan2(y, x);

            return target.set(
              (1.5 * Math.cos(phi) * Math.sin(rho - t)) / Math.sqrt(rho),
              (1.5 * Math.sin(phi) * Math.sin(rho - t)) / Math.sqrt(rho),
              0
            );
          }
        };

        parent.lattice = false;
      </script>
    </div>

    <p>
      Sound waves whose geometry is determined by three dimensions, spherical
      waves, obey the wave equation
    </p>

    <div class="math">
      <span class="math-frac">
        <span class="math-num"> ∂<sup>2</sup><i>u</i> </span>
        <span class="math-denom"> ∂<i>r</i><sup>2</sup> </span>
      </span>

      +

      <span class="math-frac">
        <span class="math-num"> 2 </span>
        <span class="math-denom">
          <i>r</i>
        </span>
      </span>

      <span class="math-frac">
        <span class="math-num"> ∂<i>u</i> </span>
        <span class="math-denom"> ∂<i>r</i> </span>
      </span>

      −

      <span class="math-frac">
        <span class="math-num">
          1<sup></sup>
          <!-- sup for vertical alignment -->
        </span>
        <span class="math-denom"> <i>c</i><sup>2</sup> </span>
      </span>

      <span class="math-frac">
        <span class="math-num"> ∂<sup>2</sup><i>u</i> </span>
        <span class="math-denom"> ∂<i>t</i><sup>2</sup> </span>
      </span>

      =&nbsp;0
    </div>

    <p>
      The monochromatic solution for spherical sound waves will be taken to be
    </p>

    <div class="math">
      <i>u</i>(<i>r</i>,<i>t</i>) =

      <span class="math-frac">
        <span class="math-num"> sin(<i>k</i><i>r</i> ± ω<i>t</i>) </span>
        <span class="math-denom">
          <i>r</i>
        </span>
      </span>
    </div>

    <p>
      Here is a spherical wave moving on a three-dimensional lattice of atoms:
    </p>

    <div class="view">
      <script>
        parent = document.scripts[document.scripts.length - 1].parentNode;

        parent.displacement = function (x, y, z, t, target) {
          if (x * x + y * y + z * z < 0.01) {
            return target.set(0, 0, 0);
          } else {
            const r = Math.sqrt(x * x + y * y + z * z);
            const theta = Math.acos(z / r);
            const phi = Math.atan2(y, x);

            return target.set(
              (3 * Math.cos(phi) * Math.sin(theta) * Math.sin(r - t)) / r,
              (3 * Math.sin(phi) * Math.sin(theta) * Math.sin(r - t)) / r,
              (3 * Math.cos(theta) * Math.sin(r - t)) / r
            );
          }
        };

        parent.lattice = true;
      </script>
    </div>

    <p>
      Here is a spherical wave moving through a three-dimensional random
      distribution of molecules:
    </p>

    <div class="view">
      <script>
        parent = document.scripts[document.scripts.length - 1].parentNode;

        parent.displacement = function (x, y, z, t, target) {
          if (x * x + y * y + z * z < 0.01) {
            return target.set(0, 0, 0);
          } else {
            const r = Math.sqrt(x * x + y * y + z * z);
            const theta = Math.acos(z / r);
            const phi = Math.atan2(y, x);

            return target.set(
              (3 * Math.cos(phi) * Math.sin(theta) * Math.sin(r - t)) / r,
              (3 * Math.sin(phi) * Math.sin(theta) * Math.sin(r - t)) / r,
              (3 * Math.cos(theta) * Math.sin(r - t)) / r
            );
          }
        };

        parent.lattice = false;
      </script>
    </div>

    <p>
      The mathematical description of sound waves can be carried to higher
      dimensions, but one needs to wait for Four.js and its higher-dimensional
      successors to attempt visualizations.
    </p>
  </body>
</html>
